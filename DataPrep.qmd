---
title: "DataPrep"
author: "PMagoto"
format: html
editor: visual
---

Opening the correct packages:

```{r setup, include=FALSE, echo=FALSE}
knitr::opts_chunk$set(echo = TRUE, message=FALSE, warning=FALSE)
library(ggplot2) 
library(tidyverse)
library(DigitalMethodsData)
library(ggmap)
library(tidygeocoder)
library(leaflet)
library(leaflet.extras)
library(leaftime)
library(leaflet.providers)
library(spatstat)
```

Registering my Google Key:

```{r}
#register google key 
register_google(key = Sys.getenv("GOOGLE_KEY"))
```

inserting data sets and prepping them to be geo-coded:

```{r}
locations <- read.csv("locations3.csv") %>% 
  mutate(full.address = paste0(street.address,","," ", city, ",", " ", state))
entries <- read.csv("entries3.csv") %>% 
  mutate(full.address = paste0(street.address,","," ", city, ",", " ", state))
people <- read.csv("people3.csv") #no fuull address is needed
write.csv(locations, file = "locationsprepped.csv")#prep for geocode with ful address and savw locally
write.csv(entries, file = "entriesprepped.csv") #prep for geocode with ful address and savw locally
```

Geo-coding data:

```{r}
locationsprepped <- read.csv("locationsprepped.csv") %>% 
  mutate_geocode(full.address, output = "latlon", source = "google")
enttriesprepped <- read.csv("entriesprepped.csv") %>% 
  mutate_geocode(full.address, output = "latlon", source = "google")
write.csv(locationsprepped, file="locations.final.csv")
write.csv(enttriesprepped, file="entries.final")
```

Creating data-frames for polygons to represent Black and White Storyville:

```{r}
longitudeBSV <- c(-90.080601, -90.079958, -90.077019, -90.077834) #longitude for the polygon
latitudeBSV <- c(29.954152,29.955334,29.954153,29.952984) #latitude for the polygon
lonlatBSV <- as.data.frame(cbind(longitudeBSV,latitudeBSV)) #create dataframe for the polygon
longitudeWSV <- c(-90.076034, -90.073988, -90.070663,-90.072809)
latitudeWSV <- c(29.959378, 29.961675,29.959434,29.957063)
lonlatWSV <- as.data.frame(cbind(longitudeWSV,latitudeWSV))
```

Notes:

-   black Storyville coords: using the city ordinance 4118 to create my data, 1917.

    -   bottom left:29.954152,-90.080601

    -   top left: 29.955334,-90.079958

    -   top right:29.954153,-90.077019

    -   bottom right: 29.952984,-90.077834

    -   center: ?

1.  White Storyville Coords: using the city ordinance 4118 and the introductions to the Blue Books to create this data. 1897-1917.

    -   bottom left:29.959378,-90.076034

    -   top left: 29.961675,-90.073988

    -   top right:29.959434,-90.070663

    -   bottom right:29.957063,-90.072809

    -   center of WSV: 29.958675,-90.073182
